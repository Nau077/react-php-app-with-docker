{"ast":null,"code":"var _jsxFileName = \"/home/roman/web/php-docker-api/client/src/components/delivery__modules/delivery_form.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport FormSelect from './delivery_form-select';\nimport FormUpload from './delivery_form-upload';\nimport TextField from '@material-ui/core/TextField';\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport blue from \"@material-ui/core/colors/blue\";\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport NumberFormat from 'react-number-format';\nimport PropTypes from 'prop-types';\nimport DateFnsUtils from '@date-io/date-fns';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport * as Yup from \"yup\";\nconst schema = Yup.object().shape({\n  // rigion: Yup.string(\"Enter a name\")\n  // .required(\"Name is required\"),\n  weight: Yup.string(\"Введите ваш вес\").required(\"Вес - обязательное поле\"),\n  adress: Yup.string(\"\").min(8, \"Адрес должен состоять минимум из 8 символов\").required(\"Адрес - обязательное поле\")\n}); // import {\n//     MuiPickersUtilsProvider,\n//     KeyboardDatePicker,\n//   } from '@material-ui/pickers';\n\nfunction NumberFormatCustom(props) {\n  const {\n    inputRef,\n    onChange,\n    ...other\n  } = props;\n  console.log(props);\n  return /*#__PURE__*/React.createElement(NumberFormat, Object.assign({}, other, {\n    getInputRef: inputRef,\n    onValueChange: values => {\n      onChange({\n        target: {\n          value: values.value\n        }\n      });\n    },\n    isNumericString: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  }));\n}\n\nNumberFormatCustom.propTypes = {\n  inputRef: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nconst useStyles = makeStyles(theme => ({\n  card: {\n    minWidth: 275\n  },\n  button: {\n    color: blue[900],\n    margin: 10\n  },\n  root: {\n    '& .MuiTextField-root': {\n      margin: theme.spacing(1),\n      minWidth: 240,\n      maxWidth: 450,\n      width: '100%',\n      textField: {\n        flexBasis: 200,\n        textField: {\n          marginLeft: theme.spacing(1),\n          marginRight: theme.spacing(1)\n        }\n      }\n    }\n  }\n}));\n\nfunction DeliveryForm(props) {\n  const [formState, setFormState] = React.useState({\n    values: {\n      rigion: '',\n      waterbase: '',\n      weight: '',\n      adress: '',\n      date: new Date(),\n      upload: ''\n    },\n    errors: {}\n  });\n  useEffect(() => {\n    formState.values.rigion = props.rigionValue;\n  }, []);\n\n  const handleChangeForm = async event => {\n    console.log(event);\n    let {\n      target: {\n        type,\n        name,\n        value,\n        selected\n      }\n    } = event;\n    let errors = await schema.validateAt(name, {\n      [name]: value\n    }, {\n      abortEarly: false\n    }).then(_ => ({\n      [name]: null\n    })).catch(convert);\n    setFormState(state => ({\n      values: { ...state.values,\n        [name]: value\n      },\n      errors: { ...state.errors,\n        ...errors\n      }\n    })); // setFormState({\n    //      ...formState,\n    //       [prop]: event.target.value \n    //     });\n    //   validate(prop);\n  };\n\n  const handleSelectChange = value => {\n    setFormState({ ...formState,\n      waterbase: value\n    });\n  };\n\n  const handleDateChange = prop => {\n    setFormState({ ...formState,\n      date: prop\n    });\n  };\n\n  const handleUploadFile = prop => {\n    setFormState({ ...formState,\n      upload: [prop]\n    });\n  };\n\n  const handleSubmit = callback => {\n    return async function (event) {\n      event.preventDefault();\n      let errors = await schema.validate(formState.values, {\n        abortEarly: false\n      }).then(_ => ({})) // сбрасывает объект ошибок состояния, если ошибок нет\n      .catch(convert);\n      setFormState(state => ({ ...state,\n        errors\n      }));\n\n      if (React.isEmpty(errors)) {\n        callback(formState.values);\n      }\n    };\n  };\n\n  const classes = useStyles();\n  return /*#__PURE__*/React.createElement(Card, {\n    className: classes.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.root,\n    autoComplete: \"off\",\n    onSubmit: handleSubmit(form => {\n      console.log(\"Success\", form);\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }, props.rigionValue ? /*#__PURE__*/React.createElement(TextField, {\n    required: true,\n    id: \"standard-required1\",\n    label: \"\\u0412\\u0430\\u0448 \\u0440\\u0435\\u0433\\u0438\\u043E\\u043D\",\n    className: classes.textField,\n    value: props.rigionValue,\n    InputProps: {\n      readOnly: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 35\n    }\n  }) : /*#__PURE__*/React.createElement(CircularProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 16\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    name: \"weight\",\n    id: \"standard-required2\",\n    label: \"\\u041D\\u0430\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435 \\u043C\\u0430\\u0441\\u0441\\u0443 \\u0432\\u043E\\u0434\\u044B \\u0432 \\u0442\\u043E\\u043D\\u043D\\u0430\\u0445\",\n    className: classes.textField,\n    value: formState.values.weight,\n    helperText: formState.errors.weight ? formState.errors.weight : \"\",\n    onChange: handleChangeForm,\n    error: formState.errors.weight,\n    InputProps: {\n      inputComponent: NumberFormatCustom,\n      endAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n        position: \"end\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 35\n        }\n      }, \"T\")\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    name: \"adress\",\n    label: \"\\u041D\\u0430\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435 \\u0430\\u0434\\u0440\\u0435\\u0441\\u0441\",\n    value: formState.values.adress,\n    onChange: handleChangeForm,\n    fullWidth: true,\n    error: formState.errors.adress,\n    helperText: formState.errors.adress ? formState.errors.adress : \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 14\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    className: classes.button,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 15\n    }\n  }, \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\")))));\n}\n\nlet convert = errors => {\n  return errors.inner.reduce((z, item) => {\n    return z[item.path] ? z : { ...z,\n      [item.path]: item.message\n    };\n  }, {});\n};\n\nexport default DeliveryForm;","map":{"version":3,"sources":["/home/roman/web/php-docker-api/client/src/components/delivery__modules/delivery_form.js"],"names":["React","useState","useEffect","useRef","FormSelect","FormUpload","TextField","makeStyles","InputAdornment","blue","CardContent","Button","Card","NumberFormat","PropTypes","DateFnsUtils","CircularProgress","Yup","schema","object","shape","weight","string","required","adress","min","NumberFormatCustom","props","inputRef","onChange","other","console","log","values","target","value","propTypes","func","isRequired","useStyles","theme","card","minWidth","button","color","margin","root","spacing","maxWidth","width","textField","flexBasis","marginLeft","marginRight","DeliveryForm","formState","setFormState","rigion","waterbase","date","Date","upload","errors","rigionValue","handleChangeForm","event","type","name","selected","validateAt","abortEarly","then","_","catch","convert","state","handleSelectChange","handleDateChange","prop","handleUploadFile","handleSubmit","callback","preventDefault","validate","isEmpty","classes","form","readOnly","inputComponent","endAdornment","inner","reduce","z","item","path","message"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport FormSelect from './delivery_form-select'\nimport FormUpload from './delivery_form-upload'\nimport TextField from '@material-ui/core/TextField';\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport blue from \"@material-ui/core/colors/blue\";\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport NumberFormat from 'react-number-format';\nimport PropTypes from 'prop-types';\nimport DateFnsUtils from '@date-io/date-fns';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport * as Yup from \"yup\"\n\nconst schema = Yup.object().shape({\n  // rigion: Yup.string(\"Enter a name\")\n  // .required(\"Name is required\"),\n  weight: Yup.string(\"Введите ваш вес\")\n  .required(\"Вес - обязательное поле\"),\n  adress: Yup.string(\"\")\n  .min(8, \"Адрес должен состоять минимум из 8 символов\")\n  .required(\"Адрес - обязательное поле\"),\n})\n \n\n\n// import {\n//     MuiPickersUtilsProvider,\n//     KeyboardDatePicker,\n//   } from '@material-ui/pickers';\n\nfunction NumberFormatCustom(props) {\n    const { inputRef, onChange, ...other } = props;\n    console.log(props)\n    return (\n      <NumberFormat\n        {...other}\n        getInputRef={inputRef}\n        onValueChange={values => {\n          onChange({\n            target: {\n              value: values.value,\n            },\n          });\n        }}\n        isNumericString\n      />\n    );\n  }\n  \n  NumberFormatCustom.propTypes = {\n    inputRef: PropTypes.func.isRequired,\n    onChange: PropTypes.func.isRequired,\n  };\n  \nconst useStyles = makeStyles((theme) => ({\n    card: {\n      minWidth: 275,\n    },\n    button: {\n      color: blue[900],\n      margin: 10\n    },\n    root: {\n      '& .MuiTextField-root': {\n        margin: theme.spacing(1),\n        minWidth: 240,\n        maxWidth: 450,\n        width: '100%',\n        textField: {\n            flexBasis: 200,\n            textField: {\n                marginLeft: theme.spacing(1),\n                marginRight: theme.spacing(1),\n              },\n          },\n      },\n    },\n  }));\n\n\n\nfunction DeliveryForm(props) {\n \n\n    const [formState, setFormState] = React.useState({\n      values: {\n        rigion: '',\n        waterbase: '',\n        weight: '',\n        adress: '',\n        date: new Date(),\n        upload: ''\n      },\n      errors: {}\n    });\n \n      useEffect(()=> {\n        formState.values.rigion = props.rigionValue\n      }, [])\n\n    \n      const handleChangeForm = async (event) => {\n        console.log(event)\n        let {target : {type, name, value, selected } } = event\n\n        let errors = await schema.validateAt(name, {[name] :value}, { abortEarly : false })\n          .then(_ => ({[name]: null}))\n          .catch(convert)\n        \n          setFormState(state => ({\n            values: {...state.values, [name]: value},\n            errors: {...state.errors, ...errors}\n          }))\n        // setFormState({\n        //      ...formState,\n        //       [prop]: event.target.value \n        //     });\n        //   validate(prop);\n      };\n\n      const handleSelectChange = value => {\n        setFormState({\n             ...formState,\n              waterbase: value\n            });\n      };\n\n      const handleDateChange = prop => {\n       \n        setFormState({\n            ...formState,\n             date: prop\n           });\n    };\n\n    const handleUploadFile = prop => {\n        setFormState({\n            ...formState,\n             upload: [prop]\n          });\n    };\n\n    const handleSubmit = (callback) => {\n     return async function (event) {\n       event.preventDefault();\n       \n       let errors = await schema.validate(formState.values, {abortEarly : false})\n          .then(_ => ({})) // сбрасывает объект ошибок состояния, если ошибок нет\n          .catch(convert)\n\n      setFormState(state => ({\n        ...state,\n        errors\n      }))\n\n      if (React.isEmpty(errors)) {\n        callback(formState.values)\n      }\n     }\n    }\n \n\n    const classes = useStyles();\n\n    return (\n      <Card className={classes.card}>\n        <CardContent>\n        <div className=\"form-wrapper\">\n        <form className={classes.root} autoComplete=\"off\" onSubmit={handleSubmit(form => {\n          console.log(\"Success\", form)\n        })}>\n             {props.rigionValue ? <TextField \n                required \n                id=\"standard-required1\" \n                label=\"Ваш регион\"\n                className={classes.textField}\n                value={props.rigionValue}\n                InputProps={{\n                    readOnly: true,\n                }}\n             />\n             : <CircularProgress />\n            }\n            {/* <FormSelect handleSelectChange={handleSelectChange} name={formState.waterbase}/> */}\n            <TextField \n                name=\"weight\"\n                id=\"standard-required2\"\n                label=\"Напишите массу воды в тоннах\"\n                className={classes.textField}\n                value={formState.values.weight}\n                helperText={formState.errors.weight ? formState.errors.weight : \"\"}\n                onChange={handleChangeForm}\n                error={formState.errors.weight}\n                InputProps={{\n                    inputComponent: NumberFormatCustom,\n                    endAdornment: <InputAdornment position=\"end\">T</InputAdornment>,\n                  }}\n             />\n             <TextField\n                name=\"adress\"\n                label=\"Напишите адресс\"\n                value={formState.values.adress}\n                onChange={handleChangeForm}\n                fullWidth\n                error={formState.errors.adress}\n                helperText={formState.errors.adress ? formState.errors.adress : \"\"}\n             />\n             {/* <MuiPickersUtilsProvider utils={DateFnsUtils}>\n             <KeyboardDatePicker\n                disableToolbar\n                required\n                variant=\"inline\"\n                format=\"MM/dd/yyyy\"\n                margin=\"normal\"\n                id=\"date-picker-inline\"\n                label=\"Выберите дату\"\n                value={formState.date}\n                onChange={handleDateChange}\n                KeyboardButtonProps={{\n                    'aria-label': 'change date',\n                }}\n            />\n            </MuiPickersUtilsProvider>\n            <FormUpload handleUploadFile={handleUploadFile}/> */}\n              <Button variant=\"outlined\" className={classes.button} type=\"submit\">\n                Отправить\n              </Button>\n         </form>\n         </div>\n         </CardContent>\n         </Card>\n    );\n}\n\nlet convert = (errors) => {\n  return errors.inner.reduce((z, item) => {\n    return z[item.path] ? z : {...z, [item.path] : item.message}\n    }, {})\n}\n\nexport default DeliveryForm;"]},"metadata":{},"sourceType":"module"}