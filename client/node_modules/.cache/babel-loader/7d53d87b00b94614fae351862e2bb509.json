{"ast":null,"code":"import { GET_RIGIONS, GET_WATERBASES, FILTER_WATERBASES, ENABLE_LOADING, REQUEST_IN_SUCCESS, REQUEST_IN_FAILURE } from './action_constants';\nimport API from \"../utils/API\";\n\nconst filterWaterBases = ({\n  rigion,\n  rigions,\n  waterBases\n}) => {\n  let rigionId = '';\n  const isRigionAvailable = rigions.map(el => {\n    const isExist = true;\n\n    if (el.area_names.includes(rigion)) {\n      rigionId = el.uuid;\n      return isExist;\n    }\n\n    return !isExist;\n  });\n\n  if (!isRigionAvailable) {\n    return;\n  }\n\n  return waterBases.filter(el => el.region_uuid == rigionId);\n};\n\nexport const sendFormData = (payload, resolve) => dispatch => {\n  const coolData = {\n    rigion: payload.rigion,\n    waterbase: payload.waterbase,\n    weight: payload.weight,\n    adress: payload.adress,\n    date: payload.date\n  };\n  let formData = new FormData();\n  formData.append('file', payload.upload);\n  formData.append('cool_data', JSON.stringify(coolData));\n  dispatch({\n    type: ENABLE_LOADING\n  });\n  API.post('addData', formData, {\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    }\n  }).then(res => {\n    if (res) dispatch({\n      type: REQUEST_IN_SUCCESS\n    });\n    resolve(res);\n  }).catch(error => {\n    console.error(error);\n    dispatch({\n      type: REQUEST_IN_FAILURE\n    });\n  });\n};\nexport const getRigions = () => dispatch => {\n  dispatch({\n    type: ENABLE_LOADING\n  });\n  API.get('rigions').then(response => {\n    const rigions = response.data.data;\n    dispatch({\n      type: GET_RIGIONS,\n      payload: rigions\n    });\n    dispatch({\n      type: REQUEST_IN_SUCCESS\n    });\n  }).catch(e => {\n    console.error(e);\n    dispatch({\n      type: REQUEST_IN_FAILURE\n    });\n  });\n};\nexport const getWaterbases = () => dispatch => {\n  dispatch({\n    type: ENABLE_LOADING\n  });\n  API.get('waterbases').then(response => {\n    const waterbases = response.data.data;\n    dispatch({\n      type: GET_WATERBASES,\n      payload: waterbases\n    });\n    dispatch({\n      type: REQUEST_IN_SUCCESS\n    });\n  }).catch(e => {\n    console.error(e);\n    dispatch({\n      type: REQUEST_IN_FAILURE\n    });\n  });\n};\nexport const filterWaterbases = params => dispatch => {\n  const waterbases = filterWaterBases(params);\n  dispatch({\n    type: FILTER_WATERBASES,\n    payload: waterbases\n  });\n};","map":{"version":3,"sources":["/home/roman/web/php-docker-api/client/src/actions/actions.js"],"names":["GET_RIGIONS","GET_WATERBASES","FILTER_WATERBASES","ENABLE_LOADING","REQUEST_IN_SUCCESS","REQUEST_IN_FAILURE","API","filterWaterBases","rigion","rigions","waterBases","rigionId","isRigionAvailable","map","el","isExist","area_names","includes","uuid","filter","region_uuid","sendFormData","payload","resolve","dispatch","coolData","waterbase","weight","adress","date","formData","FormData","append","upload","JSON","stringify","type","post","headers","then","res","catch","error","console","getRigions","get","response","data","e","getWaterbases","waterbases","filterWaterbases","params"],"mappings":"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","sourcesContent":["import { \n    GET_RIGIONS, \n    GET_WATERBASES, \n    FILTER_WATERBASES,\n    ENABLE_LOADING,\n    REQUEST_IN_SUCCESS,\n    REQUEST_IN_FAILURE \n} from './action_constants';\nimport API from \"../utils/API\";\n\nconst filterWaterBases = ({ rigion, rigions, waterBases }) => {\n    let rigionId = '';\n\n    const isRigionAvailable = rigions.map(el => {\n        const isExist = true;\n\n        if (el.area_names.includes(rigion)) {\n            rigionId = el.uuid;\n            return isExist; \n        }\n        return !isExist;\n    });\n\n    if (!isRigionAvailable) {\n        return;\n    }\n \n    return waterBases.filter(el => el.region_uuid == rigionId);\n};\n \nexport const sendFormData = (payload, resolve) => dispatch => {\n \n    const coolData = {\n        rigion: payload.rigion,\n        waterbase: payload.waterbase,\n        weight: payload.weight,\n        adress: payload.adress,\n        date: payload.date,\n    };\n\n    let formData = new FormData();\n\n    formData.append('file', payload.upload);\n    formData.append('cool_data', JSON.stringify(coolData));\n\n    dispatch({ type: ENABLE_LOADING });\n\n    API.post(\n        'addData',\n        formData,\n        {\n            headers: {\n                'Content-Type': 'multipart/form-data'\n            }\n        }\n    )\n        .then((res) => {\n            if (res) dispatch({ type: REQUEST_IN_SUCCESS });\n            resolve(res);\n        })\n        .catch(error => {\n            console.error(error);\n            dispatch({ type: REQUEST_IN_FAILURE });\n        });\n};\n\nexport const getRigions = () => dispatch => {\n    dispatch({ type: ENABLE_LOADING });\n\n    API.get('rigions')\n        .then((response) => {\n            const rigions =  response.data.data;\n            dispatch({ type: GET_RIGIONS, payload: rigions });\n            dispatch({ type: REQUEST_IN_SUCCESS });\n        })\n        .catch(e => {\n            console.error(e);\n            dispatch({ type: REQUEST_IN_FAILURE });\n        });\n};\n\nexport const getWaterbases = () => dispatch => {\n    dispatch({ type: ENABLE_LOADING });\n\n    API.get('waterbases')\n        .then((response) => {\n            const waterbases =  response.data.data;\n            dispatch({ type: GET_WATERBASES, payload: waterbases });\n            dispatch({ type: REQUEST_IN_SUCCESS });\n        })\n        .catch(e => {\n            console.error(e);\n            dispatch({ type: REQUEST_IN_FAILURE });\n        });\n};\n\nexport const filterWaterbases = (params) => dispatch => {\n    \n    const waterbases = filterWaterBases(params);\n \n    dispatch({ type: FILTER_WATERBASES, payload: waterbases });\n \n};\n"]},"metadata":{},"sourceType":"module"}