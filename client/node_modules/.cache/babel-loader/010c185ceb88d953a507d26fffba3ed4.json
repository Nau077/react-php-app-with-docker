{"ast":null,"code":"import { GET_RIGIONS, GET_WATERBASES, FILTER_WATERBASES } from './action_constants';\nimport API from \"../utils/API\";\n\nconst filterWaterBases = ({\n  rigion,\n  rigions,\n  waterBases\n}) => {\n  let rigionId = '';\n  const isRigionAvailable = rigions.map(el => {\n    const isExist = true;\n\n    if (el.area_names.includes(rigion)) {\n      rigionId = el.uuid;\n      return isExist;\n    }\n\n    return !isExist;\n  });\n\n  if (!isRigionAvailable) {\n    return;\n  }\n\n  return waterBases.filter(el => el.region_uuid == rigionId);\n};\n\nexport const sendFormData = payload => dispatch => {\n  console.log(payload.upload); //  const data = JSON.stringify(payload)\n\n  const coolData = {\n    rigion: payload.rigion,\n    waterbase: payload.waterbase,\n    weight: payload.weight,\n    adress: payload.adress,\n    date: payload.date\n  };\n  let formData = new FormData();\n  formData.append('file', payload.upload);\n  formData.append('cool_data', JSON.stringify(coolData));\n  API.post('addData', JSON.stringify(formData) // {\n  // \theaders: {\n  // \t\t'Content-Type': 'multipart/form-data'\n  // \t}\n  // }\n  ).then(response => {\n    console.log(response); // const rigions =  response.data.data;\n    // dispatch({ type: GET_RIGIONS, payload: rigions });\n  });\n};\nexport const getRigions = () => dispatch => {\n  API.get('rigions').then(response => {\n    const rigions = response.data.data;\n    dispatch({\n      type: GET_RIGIONS,\n      payload: rigions\n    });\n  });\n};\nexport const getWaterbases = () => dispatch => {\n  API.get('waterbases').then(response => {\n    const waterbases = response.data.data;\n    dispatch({\n      type: GET_WATERBASES,\n      payload: waterbases\n    });\n  });\n};\nexport const filterWaterbases = params => dispatch => {\n  const waterbases = filterWaterBases(params);\n  dispatch({\n    type: FILTER_WATERBASES,\n    payload: waterbases\n  });\n};","map":{"version":3,"sources":["/home/roman/web/php-docker-api/client/src/actions/actions.js"],"names":["GET_RIGIONS","GET_WATERBASES","FILTER_WATERBASES","API","filterWaterBases","rigion","rigions","waterBases","rigionId","isRigionAvailable","map","el","isExist","area_names","includes","uuid","filter","region_uuid","sendFormData","payload","dispatch","console","log","upload","coolData","waterbase","weight","adress","date","formData","FormData","append","JSON","stringify","post","then","response","getRigions","get","data","type","getWaterbases","waterbases","filterWaterbases","params"],"mappings":"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","sourcesContent":["import { GET_RIGIONS, GET_WATERBASES, FILTER_WATERBASES } from './action_constants';\nimport API from \"../utils/API\";\n\nconst filterWaterBases = ({rigion, rigions, waterBases}) => {\n    let rigionId = ''\n\n    const isRigionAvailable = rigions.map(el => {\n        const isExist = true\n\n        if (el.area_names.includes(rigion)) {\n           rigionId = el.uuid\n           return isExist \n        }\n        return !isExist\n    })\n\n    if (!isRigionAvailable) {\n        return\n    }\n \n    return waterBases.filter(el => el.region_uuid == rigionId)\n}\n \nexport const sendFormData = (payload) => dispatch => {\n    console.log(payload.upload)\n\n  //  const data = JSON.stringify(payload)\n \n    const coolData = {\n        rigion: payload.rigion,\n        waterbase: payload.waterbase,\n        weight: payload.weight,\n        adress: payload.adress,\n        date: payload.date,\n    }\n\n    let formData = new FormData();\n\n    formData.append('file', payload.upload)\n    formData.append('cool_data', JSON.stringify(coolData))\n\n    API.post(\n        'addData',\n         JSON.stringify(formData),\n\t\t\t\t\t// {\n\t\t\t\t\t// \theaders: {\n\t\t\t\t\t// \t\t'Content-Type': 'multipart/form-data'\n\t\t\t\t\t// \t}\n\t\t\t\t\t// }\n         \n         \n         )\n        .then((response) => {\n            console.log(response)\n            // const rigions =  response.data.data;\n            // dispatch({ type: GET_RIGIONS, payload: rigions });\n        }); \n    }\n\nexport const getRigions = () => dispatch => {\n    API.get('rigions')\n        .then((response) => {\n            const rigions =  response.data.data;\n            dispatch({ type: GET_RIGIONS, payload: rigions });\n        }); \n    }\n\nexport const getWaterbases = () => dispatch => {\n    API.get('waterbases')\n        .then((response) => {\n            const waterbases =  response.data.data;\n            dispatch({ type: GET_WATERBASES, payload: waterbases });\n        }); \n    }\n\nexport const filterWaterbases = (params) => dispatch => {\n    \n            const waterbases = filterWaterBases(params)\n \n            dispatch({ type: FILTER_WATERBASES, payload: waterbases });\n \n    }"]},"metadata":{},"sourceType":"module"}