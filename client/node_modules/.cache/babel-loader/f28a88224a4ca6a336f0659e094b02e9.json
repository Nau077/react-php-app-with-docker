{"ast":null,"code":"var _jsxFileName = \"/home/roman/web/php-docker-api/client/src/components/delivery__modules/delivery_form-upload.js\";\nimport React from \"react\";\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Fab from \"@material-ui/core/Fab\";\nimport blue from \"@material-ui/core/colors/blue\";\nimport Grid from \"@material-ui/core/Grid\";\nimport CloudUploadIcon from '@material-ui/icons//CloudUpload';\nimport red from \"@material-ui/core/colors/red\";\nimport { withStyles } from \"@material-ui/core/styles\";\n\nconst styles = theme => ({\n  root: {\n    backgroundColor: theme.palette.background.paper,\n    width: 400,\n    margin: 'auto',\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"flex-end\"\n  },\n  icon: {\n    margin: theme.spacing(2)\n  },\n  iconHover: {\n    margin: theme.spacing(2),\n    \"&:hover\": {\n      color: red[800]\n    }\n  },\n  cardHeader: {\n    textalign: \"center\",\n    align: \"center\",\n    backgroundColor: \"white\"\n  },\n  input: {\n    display: \"none\"\n  },\n  title: {\n    color: blue[800],\n    fontWeight: \"bold\",\n    fontFamily: \"Montserrat\",\n    align: \"center\"\n  },\n  button: {\n    color: blue[900],\n    margin: 10\n  },\n  secondaryButton: {\n    color: \"gray\",\n    margin: 10\n  },\n  typography: {\n    margin: theme.spacing(2),\n    backgroundColor: \"default\"\n  }\n});\n\nclass FormUpload extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      mainState: \"initial\",\n      imageUploaded: 0,\n      selectedFile: null,\n      type: null,\n      name: null\n    };\n\n    this.handleUploadClick = event => {\n      let file = event.target.files[0];\n      const reader = new FileReader();\n      let url = '';\n      console.log(file.type);\n\n      if (reader && file && (file.type.match('image.*') || file.type.match('application/pdf'))) {\n        console.log(123);\n        url = reader.readAsDataURL(file);\n      } else {\n        return;\n      }\n\n      this.props.handleUploadFile(file);\n      const name = event.target.files[0].name;\n      const lastDot = name.lastIndexOf('.');\n      const fileName = name.substring(0, lastDot);\n      const ext = name.substring(lastDot + 1);\n\n      reader.onloadend = function (e) {\n        this.setState({\n          selectedFile: [reader.result]\n        });\n      }.bind(this);\n\n      this.setState({\n        mainState: \"uploaded\",\n        selectedFile: event.target.files[0],\n        imageUploaded: 1,\n        type: ext,\n        name: name\n      });\n    };\n  }\n\n  renderInitialState() {\n    const {\n      classes\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CardContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      justify: \"center\",\n      alignItems: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      accept: \"image/jpeg,image/gif,image/png,application/pdf,image/x-eps\",\n      className: classes.input,\n      id: \"contained-button-file\",\n      multiple: true,\n      type: \"file\",\n      onChange: this.handleUploadClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"contained-button-file\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Fab, {\n      component: \"span\",\n      className: classes.button,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(CloudUploadIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    }))))));\n  }\n\n  renderUploadedState() {\n    const {\n      classes\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CardActionArea, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }\n    }, this.state.type !== 'pdf' ? /*#__PURE__*/React.createElement(\"img\", {\n      width: \"70%\",\n      className: classes.media,\n      src: this.state.selectedFile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }\n    }) : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }\n    }, this.state.name)));\n  }\n\n  render() {\n    const {\n      classes\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.root,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"upload-card__wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"upload-card__signature\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }\n    }, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u0435 \\u0434\\u043E\\u0432\\u0435\\u0440\\u0435\\u043D\\u043D\\u043E\\u0441\\u0442\\u044C \\u043D\\u0430 \\u0432\\u043E\\u0434\\u0438\\u0442\\u0435\\u043B\\u044F\"), this.renderInitialState(), this.state.mainState == \"uploaded\" && this.renderUploadedState())));\n  }\n\n}\n\nexport default withStyles(styles, {\n  withTheme: true\n})(FormUpload);","map":{"version":3,"sources":["/home/roman/web/php-docker-api/client/src/components/delivery__modules/delivery_form-upload.js"],"names":["React","CardActionArea","CardContent","Fab","blue","Grid","CloudUploadIcon","red","withStyles","styles","theme","root","backgroundColor","palette","background","paper","width","margin","display","justifyContent","alignItems","icon","spacing","iconHover","color","cardHeader","textalign","align","input","title","fontWeight","fontFamily","button","secondaryButton","typography","FormUpload","Component","state","mainState","imageUploaded","selectedFile","type","name","handleUploadClick","event","file","target","files","reader","FileReader","url","console","log","match","readAsDataURL","props","handleUploadFile","lastDot","lastIndexOf","fileName","substring","ext","onloadend","e","setState","result","bind","renderInitialState","classes","renderUploadedState","media","render","withTheme"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Fab from \"@material-ui/core/Fab\";\nimport blue from \"@material-ui/core/colors/blue\";\nimport Grid from \"@material-ui/core/Grid\";\nimport CloudUploadIcon from '@material-ui/icons//CloudUpload';\nimport red from \"@material-ui/core/colors/red\";\nimport { withStyles } from \"@material-ui/core/styles\";\n\nconst styles = theme => ({\n  root: {\n    backgroundColor: theme.palette.background.paper,\n    width: 400,\n    margin: 'auto',\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"flex-end\"\n  },\n  icon: {\n    margin: theme.spacing(2)\n  },\n  iconHover: {\n    margin: theme.spacing(2),\n    \"&:hover\": {\n      color: red[800]\n    }\n  },\n  cardHeader: {\n    textalign: \"center\",\n    align: \"center\",\n    backgroundColor: \"white\"\n  },\n  input: {\n    display: \"none\"\n  },\n  title: {\n    color: blue[800],\n    fontWeight: \"bold\",\n    fontFamily: \"Montserrat\",\n    align: \"center\"\n  },\n  button: {\n    color: blue[900],\n    margin: 10\n  },\n  secondaryButton: {\n    color: \"gray\",\n    margin: 10\n  },\n  typography: {\n    margin: theme.spacing(2),\n    backgroundColor: \"default\"\n  },\n\n});\n\nclass FormUpload extends React.Component {\n\n  state = {\n    mainState: \"initial\",\n    imageUploaded: 0,\n    selectedFile: null,\n    type: null,\n    name: null\n  };\n\n  handleUploadClick = event => {\n    let file = event.target.files[0];\n    const reader = new FileReader();\n    let url = ''\n    console.log(file.type)\n    if (reader && file && (file.type.match('image.*') || file.type.match('application/pdf'))) {\n      console.log(123)\n       url = reader.readAsDataURL(file);\n    } else {\n      return\n    }\n    \n    this.props.handleUploadFile(file) \n\n    const name = event.target.files[0].name;\n    const lastDot = name.lastIndexOf('.');\n\n    const fileName = name.substring(0, lastDot);\n    const ext = name.substring(lastDot + 1);\n\n    reader.onloadend = function(e) {\n      this.setState({\n        selectedFile: [reader.result]\n      });\n    }.bind(this);\n\n    this.setState({\n      mainState: \"uploaded\",\n      selectedFile: event.target.files[0],\n      imageUploaded: 1,\n      type: ext,\n      name: name\n    });\n    \n  };\n\n  renderInitialState() {\n    const { classes } = this.props;\n\n    return (\n      <React.Fragment>\n        <CardContent>\n          <Grid container justify=\"center\" alignItems=\"center\">\n            <input\n              accept=\"image/jpeg,image/gif,image/png,application/pdf,image/x-eps\"\n              className={classes.input}\n              id=\"contained-button-file\"\n              multiple\n              type=\"file\"\n              onChange={this.handleUploadClick}\n            />\n            <label htmlFor=\"contained-button-file\">\n              <Fab component=\"span\" className={classes.button}>\n                <CloudUploadIcon/>\n              </Fab>\n            </label>\n          </Grid>\n        </CardContent>\n      </React.Fragment>\n    );\n  }\n\n  renderUploadedState() {\n    const { classes } = this.props;\n\n    return (\n      <React.Fragment>\n        <CardActionArea>\n        {\n          this.state.type !== 'pdf' ?\n          <img\n          width=\"70%\"\n          className={classes.media}\n          src={this.state.selectedFile}\n        /> :\n        <p>{this.state.name}</p>\n        }\n        </CardActionArea>\n      </React.Fragment>\n    );\n  }\n \n\n  render() {\n    const { classes } = this.props;\n\n    return (\n      <React.Fragment>\n        <div className={classes.root}>\n          <div className=\"upload-card__wrapper\">\n          <div className=\"upload-card__signature\">\n            Загрузите доверенность на водителя\n         </div>\n            {(this.renderInitialState())}\n            {  (this.state.mainState == \"uploaded\" &&\n                this.renderUploadedState())\n                }\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(FormUpload);\n"]},"metadata":{},"sourceType":"module"}